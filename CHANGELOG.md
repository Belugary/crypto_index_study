# 更新日志

所有此项目的重要变更都将记录在此文件中。

本项目遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/) 格式，并使用 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [未发布]

### ✨ 新增 (Added)

- 待发布的新功能

### 🔧 优化 (Changed)

- 待发布的功能改进

### 🐛 修复 (Fixed)

- 待发布的问题修复

---

## [1.2.1] - 2025-07-11

### 🐛 修复 (Fixed)

- **配置一致性修复**:
  - 统一项目中所有"前500名币种"的配置，解决了部分地方显示300的不一致问题
  - 修复 `scripts/update_price_data.py` 中所有默认参数为500
  - 更新 `README.md` 中的功能描述保持一致性
  - 修正命令行帮助文档的默认值说明

### 🔧 优化 (Changed)

- **代码架构改进**:
  - `PriceDataUpdater` 增强依赖注入支持，构造函数支持可选的 `api`、`downloader`、`checker` 参数
  - 添加稳定币检查逻辑，主处理循环中自动跳过稳定币处理
  - 改进测试架构，支持更好的单元测试隔离

### ✨ 新增 (Added)

- **开发指南升级**:
  - 新增"配置一致性原则"章节，建立配置变更的标准流程
  - 建立完整的一致性检查清单，涵盖代码、文档、配置三个层面
  - 新增"变更管理最佳实践"，提供深层架构防范措施
  - 定义单一数据源原则、依赖注入模式等架构设计准则

---

## [1.2.0] - 2025-07-11

### ✨ 新增 (Added)

- **文档管理系统**:
  - 创建 `CHANGELOG.md` 用于记录版本历史。
  - 添加 `docs/` 目录和详细的下载状态说明。
- **日志管理系统**:
  - 统一所有日志到根目录 `logs/`。

### 🔧 优化 (Changed)

- **文档结构**:
  - 重构 `README.md`，突出核心功能和使用示例。
  - 优化 `copilot-instructions.md`，使其更清晰、简洁。
- **Git 配置**:
  - 优化 `.gitignore`，允许同步开发指南，同时保护敏感信息。
- **代码质量**:
  - 移除未使用的 `os` 导入，规范化代码格式。

### 🐛 修复 (Fixed)

- **路径引用**: 修复了 `BatchDownloader` 中错误的日志路径。
- **文档一致性**: 统一了所有文档中的数据范围、路径引用和功能描述。

---

## [1.1.0] - 2025-07-11

### ✨ 新增 (Added)

- **价格数据更新系统**:
  - `scripts/update_price_data.py` 实现完整的增量更新。
  - 自动发现和更新 Top 500 市值币种。
  - 实时进度跟踪和新币种自动集成。

### 🚀 性能优化 (Performance)

- **API 调用**: 优化至 461.5 calls/min (0.13s 间隔)。
- **执行效率**: 更新时间从 10+ 分钟降至 16.8 秒 (99.5% 节省)。

### 📊 数据资产 (Data)

- **范围扩展**: 数据覆盖从 Top 300 扩展到 Top 500。
- **数据更新**: 更新了 500+ 币种的价格数据，新增 11 个币种。

---

## [1.0.0] - 2025-07-10

### ✨ 新增 (Added)

- **项目基础架构**:
  - 建立核心目录结构 (`src/`, `data/`, `tests/`)。
  - 完整的 CoinGecko Pro API 客户端 (`src/api/coingecko.py`)。
- **元数据管理系统**:
  - `scripts/update_all_metadata.py` 用于更新元数据和稳定币信息。
- **批量下载器**:
  - `src/data/batch_downloader.py` 支持智能批量下载和缓存。
- **测试系统**:
  - `tests/` 目录包含全面的 API 测试覆盖。

---
